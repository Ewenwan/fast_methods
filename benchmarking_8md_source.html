<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>n-Dimensional Fast Methods: markdown/benchmarking.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">n-Dimensional Fast Methods
   &#160;<span id="projectnumber">0.7</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('benchmarking_8md.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">markdown/benchmarking.md</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor"># Benchmarking</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor"></span>We provide two different ways to perform benchmarks: coding or <span class="keyword">using</span> configuration (CFG) files.</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;\note We acknowledge that it is a bit tedious how we work with the folders. However, we decided with relative paths so that the user has total freedom to set the files as he/she wants.</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">## Coding</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor"></span>Check the  `test_fm_benchmark.cpp` example.</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;\note The benchmark application is currently limited to 2D/3D and to work with <a class="code" href="classFMCell.html">FMCell</a>-based <a class="code" href="classnDGridMap.html">nDGridMap</a>. However, it is really easy to modify that. Check `fm_benchmark.cpp` and follow the comments within the code <span class="keywordflow">for</span> more instructions.</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;## Benchmarking application</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;This application allows to configure and run benchmarks very easily. It is implemented in `fm_benchmark.cpp` and uses the `<a class="code" href="classBenchmarkCFG.html">BenchmarkCFG</a>` <span class="keyword">class </span>to parse the CFG files and configure a <a class="code" href="classBenchmark.html">Benchmark</a> class.</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;- [Read this to build the application](markdown/building.md)</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;\note This benchmark application has been tested with Fast Methods. <a class="code" href="classFM2.html">FM2</a>-based solvers were not tested.</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;To run a benchmark once compiled:</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    $ ./fm_benchmark ../data/benchmark.cfg</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;It will parse `benchmark.cfg` and run all the solvers in the environment set with the specified configurations. It will generate a folder called `results` storing a log and grids (if set to do so). This folder will be generated from the current terminal working directory.</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">### CFG file</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor"></span>`benchmark_from_grid.cfg` provides an example of most of the capabilites implemented:</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">    # Example configuration file</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor"></span>    [grid]</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">    # File: route to image from the current terminal working dir, NOT from this file folder.</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor"></span>    file=../data/img.png</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">    #text=../data/map.grid</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor"></span><span class="preprocessor">    #ndims=2</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor"></span><span class="preprocessor">    #cell=FMCell</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor"></span><span class="preprocessor">    #dimsize=300,300</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;Under grid label, we configure the enviroment. If a file is provided (in occupancy format, that is, 8bits grayscale) `<a class="code" href="classFMCell.html">FMCell</a>` and 2 dimensions will be assumed. `dimsize` will be adapted to the size of the image given. A 2D <a class="code" href="classFMCell.html">FMCell</a>, 200x200 grid is given by default.</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;\note Those key requiring relative paths, such as `file` or `text`, require relative paths using as current folder the current working directory of the terminal executing the benchmark, not the CFG file folder neither the benchmarking program binary folder.</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    [problem]</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    start=150,150</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    goal=50,50</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;Start and goal coordinates. Note the format: `s_x, s_y, s_z, ...` and `g_x, g_y, g_z, ...`. If the goal is omitted, the solvers will be rund through all the possible space.</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;\note Configuring benchmarks with CFG files allows a unique start and unique goal. If you require multiple starts, you must code the benchmark as done in test_fm_benchmark.cpp</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    [benchmark]</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    name=test_img</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    runs=5</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">    #savegrid=1</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor"></span><span class="preprocessor">    #savegrid=2</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;Set the name of the benchmark and the number of runs for each solver. If `savegrid == 1` a `.grid` file will be saved for the last run of each solver, identified with solver given name, i.e. `<a class="code" href="classFMM.html">FMM</a>.grid`. If `savegrid == 2` a `.grid` file is saved for every run identified as `&lt;runID&gt;.grid`. In both cases, grid files will be stored in a folder `results/&lt;benchmark_name&gt;`. By default only the log will be saved.</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    [solvers]</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    fmm=</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    fmmstar=</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    fmmstar=<a class="code" href="classFMM.html">FMM</a>*Dist,DISTANCE</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    fmmfib=</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    fmmfibstar=</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    fmmfibstar=FMMFib*Dist,DISTANCE</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    sfmm=</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    sfmmstar=</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    sfmmstar=<a class="code" href="classSFMM.html">SFMM</a>*Dist,DISTANCE</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    gmm=</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    gmm=myGMM</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    gmm=myGMM2,1.5</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    fim=</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    fim=myFIM</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    fim=myFIM2,0.01</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    ufmm=</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    ufmm=myUFMM</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    ufmm=myUFMM2,1001</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    ufmm=myUFMM3,1001,2.01</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;Specify the solvers to run. The left-hand size must remain unmodified to correctly identify the solver to use. In the right-hand size constructor parameters could be specified for the different solvers, comma-separated. Note the ordering of the parameters. If other parameters are given, the previous parameteres should be also specified.</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">### Log format</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor"></span>The benchmark generates a `results/&lt;benmchark_name&gt;.log` file which stores the important information. The format is as follows:</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;__First row:__ benchmark info.</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    name \t #runs \t #dimensions \t size dim(0) \t size dim(1) \t ... \t #start points \t start index 0 \t start index 1 \t ... \t goal index \</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;__Following rows:__ solvers information.</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    runID \t solver name \t time (ms) \n</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;For instance, the first rows generated by the previous CFG are:</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    test_img    5       2       400     300     1       60150   20050</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    0001        <a class="code" href="classFMM.html">FMM</a>     23</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    0002        <a class="code" href="classFMM.html">FMM</a>     20</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    0003        <a class="code" href="classFMM.html">FMM</a>     21</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    0004        <a class="code" href="classFMM.html">FMM</a>     21</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    0005        <a class="code" href="classFMM.html">FMM</a>     22</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    0006        <a class="code" href="classFMM.html">FMM</a>*    2</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    0007        <a class="code" href="classFMM.html">FMM</a>*    0</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    0008        <a class="code" href="classFMM.html">FMM</a>*    0</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    0009        <a class="code" href="classFMM.html">FMM</a>*    0</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    0010        <a class="code" href="classFMM.html">FMM</a>*    0</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    0011        <a class="code" href="classFMM.html">FMM</a>*Dist        2</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    ...</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    ...</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    0055        <a class="code" href="classFIM.html">FIM</a>     13</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    0056        <a class="code" href="classUFMM.html">UFMM</a>    15</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    0057        <a class="code" href="classUFMM.html">UFMM</a>    12</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    0058        <a class="code" href="classUFMM.html">UFMM</a>    16</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    0059        <a class="code" href="classUFMM.html">UFMM</a>    12</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    0060        <a class="code" href="classUFMM.html">UFMM</a>    13</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor">### Scripts</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="preprocessor"></span>Different scripts are provided to help the user to parse the benchmark results. All of them are in the `scripts` folder and most of them are for Matlab (they have not been tested in Octave but most will probably work).</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="preprocessor">#### Parse Logs</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor"></span>- parseBenchmarkLog.m: provides the function `bm = parseBenchmarkLog(file)`, where `file` is the path and filename to the generated log. It returns a cell structure `bm` with all the information.</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    bm =</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    name: &#39;test_img&#39;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    nruns: 5</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    ndims: 2</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    dimsize: [2x1 double]</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    startpoints: 60150</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    goalpoint: 20050</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    nexp: 60</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    exp: {12x2 cell}</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; `bm.exp` divides the different solvers. For instance, <span class="keywordflow">for</span> the previous log, `bm.exp{1,1}` returns the name of the first solver (<a class="code" href="classFMM.html">FMM</a>) and `bm.exp{1,2}` the times <span class="keywordflow">for</span> all runs <span class="keywordflow">for</span> first solver ([23 20 21 21 22]).</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;#### Parse Grids</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;- parseGrid.m: Parses a `.grid` file. Use as `grid = parseGrid(<span class="stringliteral">&#39;0001.grid&#39;</span>)`, gives the result:</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    celltype: <span class="stringliteral">&#39;FMCell - Fast Marching cell&#39;</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    leafsize: 1</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    ndims: 2</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    dimsize: [400 300]</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    cells: [300x400 double]</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;Then, you can easily visualize:</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    imagesc(grid.cells);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    axis image; axis xy;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;![Example](gridplot.png)</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;#### Run many experiments</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;Every CFG file can run several solvers, with several configurations, several times. However, it only allows to run on one enviroment. To easily solve <span class="keyword">this</span>, we provide a bash script which executes the benchmark <span class="keywordflow">for</span> all the cfg files in a folder (although it could be improved as it assumes the location of the benchmark tool relatively to the terminal working dir).</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;- Place .cfg files in the folder: `fast_methods/data/test_cfg/`</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;- Place the terminal in folder: `fast_methods/data/</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;- Execute run_benchmarks.bash`:</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    $ bash ../scripts/run_benchmarks.bash test_cfg</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;This will generate the folder `fast_methods/data/results` with the logs of all the benchmarks. In our <span class="keywordflow">case</span>, we executed the following CFG files, modifying only the grid size and start point:</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    [grid]</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    ndims=2</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    cell=<a class="code" href="classFMCell.html">FMCell</a></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    dimsize=150,150    | dimsize=300,300    | dimsize=500,500</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    [problem]</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    start=75,75        | start=150,150      | start=250,250</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    [benchmark]</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    runs=5</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    [solvers]</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    fmm=</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    fmmfib=</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    sfmm=</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    gmm=</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    fim=</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    ufmm=</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;- We provide a Matlab script to process the logs of <span class="keyword">this</span> kind, so that it is easy to compare solvers with varying enviroment conditions. Execute the Matlab script `analyzeBenchmark.m` from the `benchmark` folder. Otherwise, you might need to change the `path_to_benchmarks` variable in the script. The output could be something like:</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;![Example](fmcomp.png)</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;\note This script is under constant development and you may need some modifications depending on your purpose.</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;## Adding <span class="keyword">new</span> solvers to <span class="keyword">this</span> benchmark</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;If you have implemented a custom solver derived from <a class="code" href="classSolver.html">Solver</a> <span class="keyword">class</span>, you can easily add it to the benchmarking framework. Just follow <span class="keyword">this</span> steps (<span class="stringliteral">&quot;__mysolver__&quot;</span> is meant to be changed by your solver name):</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;\note To help you finding out the places in which you have to add your solver, look <span class="keywordflow">for</span> the comment <span class="stringliteral">&quot;// Add solver here.&quot;</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;1. Add its name (lowercase) as known solver in `benchmarkcfg.hpp` (within `readOptions()` member function):</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;~~~~~~~~~~~~~{.cpp}</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> std::vector&lt;std::string&gt; knownSolvers = {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="stringliteral">&quot;fmm&quot;</span>, <span class="stringliteral">&quot;fmmstar&quot;</span>, <span class="stringliteral">&quot;fmmfib&quot;</span>, <span class="stringliteral">&quot;fmmfibstar&quot;</span>, <span class="stringliteral">&quot;sfmm&quot;</span>, <span class="stringliteral">&quot;sfmmstar&quot;</span>,</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="stringliteral">&quot;gmm&quot;</span>, <span class="stringliteral">&quot;fim&quot;</span>, <span class="stringliteral">&quot;ufmm&quot;</span>, <span class="stringliteral">&quot;fsm&quot;</span>, <span class="stringliteral">&quot;__mysolver__&quot;</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;};</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;~~~~~~~~~~~~~</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;2. In the same file, within `configure()`, set the creation of the solver without parameters:</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;~~~~~~~~~~~~~{.cpp}</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (name == <span class="stringliteral">&quot;ufmm&quot;</span>)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        solver = <span class="keyword">new</span> <a class="code" href="classUFMM.html">UFMM&lt;grid_t&gt;</a>();</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (name == <span class="stringliteral">&quot;fsm&quot;</span>)</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        solver = <span class="keyword">new</span> <a class="code" href="classFSM.html">FSM&lt;grid_t&gt;</a>();</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (name == <span class="stringliteral">&quot;__mysolver__&quot;</span>)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        solver = <span class="keyword">new</span> __MySolver__&lt;grid_t&gt;();</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;~~~~~~~~~~~~~</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;3. Finally, below the previous code, insert your solver creation with constructor parameters (in <span class="keywordflow">case</span> it has any):</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;~~~~~~~~~~~~~{.cpp}</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">// UFMM</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="keywordflow">else</span> <span class="keywordflow">if</span> (name == <span class="stringliteral">&quot;ufmm&quot;</span>) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">if</span> (p.size() == 1)</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        solver = <span class="keyword">new</span> <a class="code" href="classUFMM.html">UFMM&lt;grid_t&gt;</a>(p[0].c_str());</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p.size() == 2)</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        solver = <span class="keyword">new</span> <a class="code" href="classUFMM.html">UFMM&lt;grid_t&gt;</a>(p[0].c_str(), boost::lexical_cast&lt;<span class="keywordtype">unsigned</span>&gt;(p[1]));</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p.size() == 3)</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        solver = <span class="keyword">new</span> <a class="code" href="classUFMM.html">UFMM&lt;grid_t&gt;</a>(p[0].c_str(), boost::lexical_cast&lt;<span class="keywordtype">unsigned</span>&gt;(p[1]), boost::lexical_cast&lt;double&gt;(p[2]));</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">// FSM</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="keywordflow">else</span> <span class="keywordflow">if</span> (name == <span class="stringliteral">&quot;fsm&quot;</span>) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">if</span> (p.size() == 1)</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        solver = <span class="keyword">new</span> <a class="code" href="classFSM.html">FSM&lt;grid_t&gt;</a>(p[0].c_str());</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p.size() == 2)</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        solver = <span class="keyword">new</span> <a class="code" href="classFSM.html">FSM&lt;grid_t&gt;</a>(p[0].c_str(), boost::lexical_cast&lt;<span class="keywordtype">unsigned</span>&gt;(p[1]));</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;}</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">// __MySolver__</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="keywordflow">else</span> <span class="keywordflow">if</span> (name == <span class="stringliteral">&quot;__mysolver__&quot;</span>) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">if</span> (p.size() == 1)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        solver = <span class="keyword">new</span> __MySolver__&lt;grid_t&gt;(p[0].c_str()); <span class="comment">// To change the name</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p.size() == 2)</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        solver = <span class="keyword">new</span> __MySolver__&lt;grid_t&gt;(p[0].c_str(), boost::lexical_cast&lt;T&gt;(p[1])); <span class="comment">// To change name and first parameter with type T (to be set).</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p.size() == 3)</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="comment">//.... In case constructor can have more parameters.</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;}</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;~~~~~~~~~~~~~</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;After these changes, you are ready to incude your solver in a CFG file and run the benchmarks.</div>
<div class="ttc" id="classFSM_html"><div class="ttname"><a href="classFSM.html">FSM</a></div><div class="ttdoc">Implements Fast Sweeping Method. </div><div class="ttdef"><b>Definition:</b> <a href="fsm_8hpp_source.html#l00041">fsm.hpp:41</a></div></div>
<div class="ttc" id="classUFMM_html"><div class="ttname"><a href="classUFMM.html">UFMM</a></div><div class="ttdoc">Fast Marching Method using a untidy priority queue (UFMM). </div><div class="ttdef"><b>Definition:</b> <a href="ufmm_8hpp_source.html#l00037">ufmm.hpp:37</a></div></div>
<div class="ttc" id="classBenchmarkCFG_html"><div class="ttname"><a href="classBenchmarkCFG.html">BenchmarkCFG</a></div><div class="ttdoc">Configures a Benchmark class from a CFG file. Inspired in the OMPLapp benchmarking software: http://o...</div><div class="ttdef"><b>Definition:</b> <a href="benchmarkcfg_8hpp_source.html#l00045">benchmarkcfg.hpp:45</a></div></div>
<div class="ttc" id="classBenchmark_html"><div class="ttname"><a href="classBenchmark.html">Benchmark</a></div><div class="ttdoc">This class provides the utilities to benchmark Fast Marching Solvers (configuration, running and logging). It works for FMM (any heap and SFMM), FIM and UFMM. It has not been tested with FM2 solvers. </div><div class="ttdef"><b>Definition:</b> <a href="benchmark_8hpp_source.html#l00033">benchmark.hpp:33</a></div></div>
<div class="ttc" id="classSFMM_html"><div class="ttname"><a href="classSFMM.html">SFMM</a></div><div class="ttdoc">Implements the Simplified Fast Marching Method, encapsulating FMM with a priority queue...</div><div class="ttdef"><b>Definition:</b> <a href="sfmm_8hpp_source.html#l00044">sfmm.hpp:44</a></div></div>
<div class="ttc" id="classnDGridMap_html"><div class="ttname"><a href="classnDGridMap.html">nDGridMap</a></div><div class="ttdoc">Templated class which represents a n-dimensional grid map. Its cells are assumed to be cubic...</div><div class="ttdef"><b>Definition:</b> <a href="ndgridmap_8hpp_source.html#l00047">ndgridmap.hpp:47</a></div></div>
<div class="ttc" id="classFMCell_html"><div class="ttname"><a href="classFMCell.html">FMCell</a></div><div class="ttdoc">A stand-alone, standard C++ class which represents each one of the cells of a gridmap and its typical...</div><div class="ttdef"><b>Definition:</b> <a href="fmcell_8h_source.html#l00036">fmcell.h:36</a></div></div>
<div class="ttc" id="classSolver_html"><div class="ttname"><a href="classSolver.html">Solver</a></div><div class="ttdoc">Abstract class that serves as interface for the actual solvers implemented. It requires (at least) th...</div><div class="ttdef"><b>Definition:</b> <a href="solver_8hpp_source.html#l00040">solver.hpp:40</a></div></div>
<div class="ttc" id="classFIM_html"><div class="ttname"><a href="classFIM.html">FIM</a></div><div class="ttdoc">Implements Fast Iterative Method. </div><div class="ttdef"><b>Definition:</b> <a href="fim_8hpp_source.html#l00036">fim.hpp:36</a></div></div>
<div class="ttc" id="classFM2_html"><div class="ttname"><a href="classFM2.html">FM2</a></div><div class="ttdoc">Implements the Fast Marching Square (FM2) planning algorithm. </div><div class="ttdef"><b>Definition:</b> <a href="fm2_8hpp_source.html#l00049">fm2.hpp:49</a></div></div>
<div class="ttc" id="classFMM_html"><div class="ttname"><a href="classFMM.html">FMM</a></div><div class="ttdoc">Implements the Fast Marching Method (FMM). </div><div class="ttdef"><b>Definition:</b> <a href="fmm_8hpp_source.html#l00064">fmm.hpp:64</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>benchmarking.md</b></li>
    <li class="footer">Generated on Fri Dec 8 2017 10:14:49 for n-Dimensional Fast Methods by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
